/*! Copyright 2023 SweetCode. All rights reserved. */(()=>{var e={914:()=>{jQuery((function(){jQuery("#debug-info-button").on("click",(function(){jQuery("#debug-info-textarea").select(),document.execCommand("copy")})),jQuery("#wpm_pro_version_demo").on("click",(function(){jQuery("#submit").trigger("click")})),document.getElementById("json-settings-file-input").addEventListener("change",wpm.readSettingsFile,!1),document.getElementById("ga4-data-api-credentials-upload-button")&&(document.getElementById("ga4-data-api-credentials-upload-button").addEventListener("change",wpm.readGa4DataApiCredentials,!1),document.getElementById("ga4-data-api-credentials-delete-button").addEventListener("click",(()=>{wpm.saveGa4DataApiCredentialsToDb({})}),!1))})),function(e,t,s){e.saveSettingsToDisk=t=>{let s=document.getElementById("export-settings-json").value;s=s.replace(/\n/g,"\r\n");let a=new Blob([s],{type:"text/plain"}),n=document.createElement("a");n.download="pixel-manager-settings_"+t+"_"+e.getCurrentDateForFileName()+".json",n.href=window.URL.createObjectURL(a),n.target="_blank",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},e.getCurrentDateForFileName=()=>{let e=new Date;return e.getFullYear()+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+("0"+e.getDate()).slice(-2)},e.readSettingsFile=t=>{let s=t.target.files[0];if(!s)return;let a=new FileReader;a.onload=function(t){let s=JSON.parse(t.target.result);e.saveImportedSettingsToDb(s)},a.readAsText(s)},e.saveImportedSettingsToDb=e=>{fetch(pmwAdminApi.root+"pmw/v1/settings/",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":pmwAdminApi.nonce},body:JSON.stringify(e)}).then((e=>e.json())).then((async e=>{e.success?(console.log(e),document.getElementById("upload-status-success").style.display="block",await new Promise((e=>setTimeout(e,5e3))),window.location.reload()):(console.log(e),document.getElementById("upload-status-error").style.display="block")})).catch((e=>{console.error(e),document.getElementById("upload-status-error").style.display="block"}))},e.readGa4DataApiCredentials=t=>{let s=t.target.files[0];if(!s)return;let a=new FileReader;a.onload=function(t){let s=JSON.parse(t.target.result);e.saveGa4DataApiCredentialsToDb(s)},a.readAsText(s)},e.deleteGa4DataApiCredentials=t=>{e.saveGa4DataApiCredentialsToDb({})},e.saveGa4DataApiCredentialsToDb=e=>{fetch(pmwAdminApi.root+"pmw/v1/ga4/data-api/credentials",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":pmwAdminApi.nonce},body:JSON.stringify(e)}).then((e=>e.json())).then((async e=>{e.success?(console.log(e),document.getElementById("ga4-api-credentials-upload-status-success").style.display="block",window.location.reload()):(console.log(e),document.getElementById("ga4-api-credentials-upload-status-error").style.display="block")})).catch((e=>{console.error(e),document.getElementById("ga4-api-credentials-upload-status-error").style.display="block"}))}}(window.wpm=window.wpm||{},jQuery)},917:()=>{function e(){jQuery("#script-blocker-notice").hide()}e(),jQuery((function(){e()}))},910:()=>{jQuery((function(){if("wpm"!==wpmGetPageId())return;let t=[],s={};if(jQuery(".section").closest("tr").hide(),jQuery(".section").each((function(){t.push({slug:jQuery(this).data("sectionSlug"),title:jQuery(this).data("sectionTitle")})})),jQuery(".subsection").each((function(){s[jQuery(this).data("sectionSlug")]=s[jQuery(this).data("sectionSlug")]||[],s[jQuery(this).data("sectionSlug")].push({title:jQuery(this).data("subsectionTitle"),slug:jQuery(this).data("subsectionSlug")})})),t.forEach((function(e){jQuery(".nav-tab-wrapper").append('<a href="#" class="nav-tab" data-section-slug="'+e.slug+'">'+e.title+"</a>")})),jQuery(".nav-tab-wrapper").after(wpmCreateSubtabUlHtml(s)),jQuery(".nav-tab-wrapper a").on("click",(function(e){e.preventDefault(),jQuery(this).addClass("nav-tab-active").siblings().removeClass("nav-tab-active");let a=jQuery(this).data("section-slug");wpmToggleSections(a,t),a in s&&jQuery("ul[data-section-slug="+a+"]").children(":first").trigger("click")})),jQuery(".pmw-subnav-li").on("click",(function(t){t.preventDefault(),jQuery(this).addClass("pmw-subnav-li-active").removeClass("pmw-subnav-li-inactive").siblings().addClass("pmw-subnav-li-inactive").removeClass("pmw-subnav-li-active"),e(jQuery(this).parent().data("section-slug"),jQuery(this).data("subsection-slug"))})),wpmGetSectionParams()){let e=wpmGetSectionParams();jQuery("a[data-section-slug="+e.section+"]").trigger("click"),!1!==e.subsection&&jQuery("ul[data-section-slug="+e.section+"]").children("[data-subsection-slug="+e.subsection+"]").trigger("click")}else jQuery("a[data-section-slug="+t[0].slug+"]").trigger("click")})),wpmCreateSubtabUlHtml=e=>{let t=Object.keys(e),s="";return t.forEach((function(t){s+='<ul class="pmw-subnav-tabs" data-section-slug="'+t+'">',e[t].forEach((function(e){s+='<li class="pmw-subnav-li pmw-subnav-li-inactive" style="cursor: pointer;" data-subsection-slug="'+e.slug+'">'+e.title+"</li>"})),s+="</ul>"})),s},wpmGetSectionParams=()=>{const e=window.location.search,t=new URLSearchParams(e);return!!t.get("section")&&{section:t.get("section"),subsection:t.get("subsection")}},wpmToggleSections=(e,t)=>{jQuery("#wpm_settings_form > h2").nextUntil(".submit").andSelf().hide(),jQuery(".pmw-subnav-tabs").hide(),jQuery(".pmw-subnav-tabs[data-section-slug="+e+"]").show();let s=t.findIndex((t=>t.slug===e));jQuery("div[data-section-slug="+e+"]").closest("table").prevAll("h2:first").next().nextUntil("h2, .submit").andSelf().show(),wpmSetUrl(t[s].slug)};const e=(e,t)=>{jQuery("#wpm_settings_form > h2").nextUntil(".submit").andSelf().hide(),jQuery("[data-section-slug="+e+"][data-subsection-slug="+t+"]").closest("tr").siblings().andSelf().hide(),jQuery("[data-section-slug="+e+"][data-subsection-slug="+t+"]").closest("table").show(),jQuery("[data-section-slug="+e+"][data-subsection-slug="+t+"]").closest("tr").nextUntil(jQuery("[data-section-slug="+e+"][data-subsection-slug]").closest("tr")).show(),wpmSetUrl(e,t)};wpmSetUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=window.location.search,a=new URLSearchParams(s);a.delete("section"),a.delete("subsection");let n="section="+e;n+=t?"&subsection="+t:"",history.pushState("","wpm"+e,document.location.pathname+"?page=wpm&"+n),jQuery('input[name ="_wp_http_referer"]').val(wpmGetAdminPath()+"?page=wpm&"+n+"&settings-updated=true")},wpmGetAdminPath=()=>new URL(jQuery("#wp-admin-canonical").attr("href")).pathname,wpmGetPageId=()=>{const e=window.location.search;return new URLSearchParams(e).get("page")},jQuery(document).on("click","[data-section-slug]",(function(){["opportunities","diagnostics","support"].includes(jQuery(this).data("section-slug"))?jQuery(".submit").hide():jQuery(".submit").show()})),jQuery(document).on("click",".pmw.opportunity-dismiss",(function(){jQuery(this).closest(".pmw.opportunity-card").appendTo("#pmw-dismissed-opportunities"),jQuery(this).closest(".opportunity-dismiss").remove()}))}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,s),i.exports}s(914),s(917),s(910)})();
//# sourceMappingURL=wpm-admin.p1.min.js.map